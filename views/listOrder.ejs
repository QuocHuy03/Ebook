<%- include('layout/header.ejs') %> <%- include('layout/navbar.ejs') %>
<% function formatNumber(num) {
    if (num == null) {
      return "0"; 
     } 
     return num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,"); } 
     %>
<section class="breadcrumb-section">
  <h2 class="sr-only">Site Breadcrumb</h2>
  <div class="container">
    <div class="breadcrumb-contents">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item active">List Cart</li>
        </ol>
      </nav>
    </div>
  </div>
</section>
<!-- Cart Page Start -->
<main class="cart-page-main-block inner-page-sec-padding-bottom">
  <div class="cart_area cart-area-padding">
    <div class="container">
      <div class="page-section-title">
        <h1>List Cart</h1>
      </div>
      <div class="row">
        <div class="col-12">
          <div>
            <!-- Cart Table -->
            <div class="cart-table table-responsive mb--40">
              <table class="table">
                <!-- Head Row -->
                <thead>
                  <tr>
                    <th class="pro-remove">STT</th>
                    <th class="pro-thumbnail">Mã Đơn Hàng</th>
                    <th class="pro-title">Ngày Đặt</th>
                    <th class="pro-price">Tình Trạng</th>
                    <th class="pro-quantity">Quantity</th>
                    <th class="pro-subtotal">Thao Tác</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Product Row -->
                  <% if (products.length === 0) { %>
                    <tr>
                      <td colspan="8" class="actions">
                        <p class="text-center text-danger font-weight-bold">Your cart is empty.</p>
                      </td>
                    </tr>
                  <% } else { %>
                      <% products.forEach((product) => { %>
                        <tr>
                            <td class="pro-remove">
                               1
                            </td>
                            <td class="pro-thumbnail">
                              <a href="#"
                                ><img
                                  src="<%= product.item.image %>"
                                  alt="<%= product.item.title %>"
                              /></a>
                            </td>
                            <td class="pro-title"><a href="#"><%= product.item.title %></a></td>
                            <td class="pro-price"><span><%= formatNumber(product.item.price) %></span></td>
                            <td class="pro-quantity">
                              <div class="pro-qty">
                                <div class="count-input-block">
                                    <input type="hidden" id="idProduct_<%= product.item._id %>" value="<%= product.item._id %>">
                                  <input
                                    type="number"
                                    id="quantity_<%= product.item._id %>"
                                    class="form-control text-center"
                                    value="<%= product.quantity %>"
                                  />
                                </div>
                              </div>
                            </td>
                            <td class="pro-subtotal"><span><%= formatNumber(product.item.price * product.quantity) %></span></td>
                            <td><button
                                type="submit"
                                class="btn btn-outlined"
                                id="updateCart_<%= product.item._id %>">Update Cart</button></td>
                          </tr>
                        
                      <% }); %>
                  <% } %>
                  <!-- Discount Row  -->
                 
                </tbody>
              </table>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

</main>

<!-- Cart Page End -->
<%- include('layout/footer.ejs') %>
